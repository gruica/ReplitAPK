<!DOCTYPE html>
<html>
<head>
    <title>Download AAB Fajl</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
        .container { max-width: 600px; margin: 0 auto; }
        .download-btn { 
            background: #4285f4; color: white; padding: 15px 30px; 
            border: none; border-radius: 5px; font-size: 18px; 
            cursor: pointer; margin: 20px;
        }
        .download-btn:hover { background: #3367d6; }
        .info { background: #f0f0f0; padding: 15px; border-radius: 5px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± Download Servis Todosijeviƒá AAB</h1>
        
        <div class="info">
            <h3>Informacije o fajlu:</h3>
            <p><strong>Ime:</strong> servis-todosijevic-release.aab</p>
            <p><strong>Veliƒçina:</strong> 18.2 MB</p>
            <p><strong>Package Name:</strong> com.servistodosijevic.app</p>
        </div>

        <button class="download-btn" onclick="downloadAAB()">
            üì• Download AAB Fajl
        </button>

        <p><em>Kliknite dugme za automatski download AAB fajla</em></p>
    </div>

    <script>
        async function downloadAAB() {
            try {
                // Prikazuj loading
                document.querySelector('.download-btn').innerHTML = '‚è≥ Downloading...';
                
                // Fetch base64 fajl
                const response = await fetch('/aab-base64.txt');
                const base64Data = await response.text();
                
                // Konvertuj base64 u bytes
                const binaryString = atob(base64Data);
                const bytes = new Uint8Array(binaryString.length);
                for (let i = 0; i < binaryString.length; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                
                // Kreiraj blob i download
                const blob = new Blob([bytes], { type: 'application/octet-stream' });
                const url = window.URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'servis-todosijevic-release.aab';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                
                // Reset dugme
                document.querySelector('.download-btn').innerHTML = '‚úÖ Download Completed!';
                setTimeout(() => {
                    document.querySelector('.download-btn').innerHTML = 'üì• Download AAB Fajl';
                }, 3000);
                
            } catch (error) {
                console.error('Download error:', error);
                document.querySelector('.download-btn').innerHTML = '‚ùå Download Failed';
                alert('Gre≈°ka tokom download-a. Poku≈°ajte ponovo.');
            }
        }
    </script>
</body>
</html>